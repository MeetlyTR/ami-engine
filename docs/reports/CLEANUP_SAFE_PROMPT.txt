# Ultra-korumacı Cleanup — Cursor prompt (son kez ve güvenli)

Bu metni Cursor'a **aynen** yapıştır. Diff, commit mesajı ve rollback dahil üretim disiplini içerir.
Model davranışı, test sonuçları ve API değişmez.

---

You are performing a SAFE, MINIMAL cleanup on the AMI-ENGINE repository.

ABSOLUTE RULES
- Do NOT change any behavior, outputs, logs, trace schema, replay determinism, dashboard visuals, or test results.
- Do NOT refactor, rename, reformat, or reorganize files.
- Public APIs and imports must remain stable.
- run_all_tests.py MUST pass fully after each change.

ALLOWED CHANGES (ONLY THESE)
1) Remove unused import:
   - File: tests/inspect_dashboard_data.py
   - Remove: `import os` (confirmed unused)

2) Deduplicate JSONL loader:
   - File: visualization/dashboard.py
   - Remove the local function `load_traces_from_jsonl`
   - Import and use instead:
     `from learning.feedback_metrics import load_traces_from_jsonl`
   - Behavior must be identical (same parsing, same empty-line handling).

PROCESS
- Apply changes one by one.
- After EACH change:
  - Run: `python run_all_tests.py`
  - Run: `python -c "import visualization.dashboard; print('dashboard ok')"`

DELIVERABLES
- Git diff summary (files + lines changed)
- Confirmation that all tests passed
- A single clean commit with message:
  "chore: safe cleanup (unused import, JSONL loader dedup)"

ROLLBACK
- If ANY test fails or behavior differs, revert immediately and report.

---

Not: Bu temizlik zaten uygulandıysa (import os kaldırıldı, load_traces_from_jsonl birleştirildi), prompt yine de ileride "sıfırdan güvenli temizlik" için referans olarak kullanılabilir.
