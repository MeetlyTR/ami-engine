# Phase 4.6.1 — Adaptive Soft Clamp (Mini-Spec)

**AMI-ENGINE:** Level 1'de hard filter yerine CUS ile sürekli davranış şekillendirme.

Referans: 07_PHASE_45, 06_PHASE_44 (CUS).

---

# 1. Amaç

- **Eski:** restrict_action_space → adayları keskin filtrele.
- **Yeni:** Seçilen aksiyonu CUS ile yumuşak biçimde güvenli tarafa itmek (soft behavioral shaping).

---

# 2. Formül

a = [severity, compassion, intervention, delay]

  severity'     = severity     * (1 − α*CUS)   [0,1] clamp
  intervention' = intervention * (1 − β*CUS)   [0,1] clamp
  delay'        = delay        + γ*CUS         [0,1] clamp
  compassion'   = compassion   (değişmez)

**Config:** SOFT_CLAMP_ALPHA = 0.60, SOFT_CLAMP_BETA = 0.50, SOFT_CLAMP_GAMMA = 0.35.

---

# 3. Pipeline

- escalation == 1 ve uncertainty (CUS) mevcutsa:
  - action_final = soft_clamp_action(sel.action, CUS, α, β, γ)
  - selected_scores = evaluate_moral(state, action_final)
  - trace ve çıktı bu aksiyon + skorlarla güncellenir; soft_safe_applied = True.
- escalation == 2: hard fail-safe (aynı).
- escalation == 0: seçim olduğu gibi.

---

# 4. Modül

**core/soft_clamp.py:** soft_clamp_action(action, cus, alpha, beta, gamma) → List[float] (4 eleman, [0,1]).

---

# 5. Chaos Invariant

Level 1 (soft_safe_applied) sonrası aksiyon sadece [0,1]^4 içinde olmalı; eski sert severity/intervention/delay sınırları kaldırıldı.

---

# 6. Phase 5 Tohumu

Temporal drift (ΔCUS > δ → preemptive escalation) Phase 5’te; soft clamp ile davranış düzgünleştiği için drift sinyali daha anlamlı olacak.

Bu spec, Adaptive Soft Clamp’ın referans dokümanıdır.
