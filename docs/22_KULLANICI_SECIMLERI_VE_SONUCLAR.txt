# Ne Seçmeli, Ne Sonuç Almalı, Test Sonuçları Ne Anlama Geliyor?

Kısa pratik rehber.

---

## 1. Ne Seçmeliyim?

### Dashboard — Demo çalıştırırken
| Seçim | Ne seçmeli | Neden |
|-------|------------|--------|
| **State profili** | `balanced` veya `safe` | L0/L1/L2 karışık görmek için balanced; daha az L2 için safe. |
| **Config profili** | `scenario_test` veya `clamp_test` | Varsayılan = hep L2. scenario_test = L0/L1/L2 dağılımı; clamp_test = soft clamp davranışı görünür. |

### Dashboard — Optimizasyon çalıştırırken
| Seçim | Ne seçmeli | Neden |
|-------|------------|--------|
| **Config tabanı** | `scenario_test` | Yoksa optimizasyon hep %100 fail_safe görür; metrikler anlamlı olmaz. |
| **State profili** | `balanced` veya curriculum bantları | balanced = karışık zorluk; easy/medium/hard = tek bant. |
| **Curriculum** | İstersen işaretle | Epoch 1–5 easy, 6–10 medium, 11+ hard; öğrenme sinyali güçlenir. |

### CLI (komut satırı)
| Amaç | Komut | Seçim |
|------|--------|--------|
| Tek offline adım | `python tools/run_offline_learning.py step --profile balanced` | `--profile`: safe, balanced, critical, chaos, easy, medium, hard. |
| Optimizasyon (anlamlı L) | `python tools/run_offline_learning.py optimize --profile safe --config-base scenario_test` | `--config-base scenario_test` olmazsa L hep yüksek / %100 fail_safe kalır. |

Özet: **L0/L1/L2 ve anlamlı metrikler istiyorsan** → Config tarafında mutlaka **scenario_test** (veya clamp_test sadece demo için). **Curriculum** istersen optimizasyonda işaretle.

---

## 2. Hangi Sonuçları Almalıyım?

### Demo (Dashboard)
- **Kayıt sayısı** = seçtiğin adım sayısı.
- **Soft clamp oranı** > %0 → clamp_test veya scenario_test ile artar; varsayılan config’te çoğunlukla %0 normal.
- **Escalation L0 / L1 / L2** → scenario_test veya clamp_test ile L0 ve L1 de görünür; varsayılanla çoğunlukla hep L2.
- **Decision Boundary (J × H)** → Trace’lerde J/H varsa noktalar dolar; yeşil L0, turuncu L1, kırmızı L2.

### Optimizasyon (Dashboard veya CLI)
- **L (loss)** zamanla düşme eğilimi → öğrenme işe yarıyor.
- **fail_safe_rate** %100’den düşük (örn. %30–60) → scenario_test tabanı ile beklenen; curriculum ile daha da çeşitlenir.
- **non_fail_reward** (varsa) yükselme → daha çok L0/L1 üretiliyor.
- **safety_gate: PASS** → Önerilen config kabul edildi; **BLOCKED** → Güvenlik eşiği aşıldı, mevcut config korundu.

### Testler (run_all_tests.py / run_tests.bat)
- **Sonuç: 16/16 aşama geçti** → Tüm modüller ve entegrasyonlar beklenen gibi çalışıyor.
- Tek bir aşama **FAIL** → O aşamadaki modül veya senaryoda tutarsızlık var; hata mesajı hangi koşulun kırıldığını söyler.

---

## 3. Test Sonuçları Ne Anlama Geliyor?

### Genel çıktı
```
Sonuç: 16/16 aşama geçti
```
- **Anlamı:** Engine, replay, senaryolar, uncertainty, soft override, soft clamp, temporal drift, trace, learning, scenario generator, adversarial testler, Monte Carlo, chaos, config profilleri hepsi tanımlı davranışı veriyor. Sistem “çalışıyor mu?” sorusuna evet.

### Aşamaların kısa anlamı
| # | Aşama | Ne kontrol ediliyor? |
|---|--------|----------------------|
| 1 | Engine + Replay | Karar motoru ve trace’ten tekrar çalıştırma tutarlı. |
| 2 | Senaryo testleri | Acil müdahale, fail-safe, replay, confidence senaryoları doğru sonuç veriyor. |
| 2b–2g | Uncertainty, Soft Override, Clamp, Drift, Trace, Learning | İlgili Phase’lerin özellikleri (CUS, escalation, clamp, metrikler) doğru. |
| 2h | Scenario Generator | Profiller (safe/balanced/critical/chaos, easy/medium/hard) state üretiyor; scenario_test ile L0/L1/L2 karışımı var. |
| 3–6 | Adversarial | Aşırı merhamet, adalet çatışması, zarar, moral drift senaryolarında sistem sınırları zorlanıyor; beklenen davranış. |
| 7 | Monte Carlo (500) | Çok sayıda rastgele state’te istatistikler (fail_safe oranı, J/H/C, confidence, escalation) tutarlı. Varsayılan config’te %100 L2 normal. |
| 8 | Chaos | Tüm config’lerde invariant’lar (J_min, H_max, override, human_escalation) sağlanıyor. |
| 9 | Config profile | Profil adıyla (scenario_test vb.) config yükleme çalışıyor. |

### Monte Carlo çıktısından örnek
```
Fail-safe (override) oranı: 1.0000 (500/500)
Level 2: 500 (100.00%)
```
- **Anlamı:** Varsayılan config ile 500 senaryonun hepsinde fail-safe tetikleniyor ve escalation L2. Bu **bilinçli güvenli tasarım**; L0/L1 görmek için scenario_test veya gevşek profil kullanılır.

### Chaos çıktısı
```
64 config, tüm invariant'lar geçti.
```
- **Anlamı:** Test edilen config’lerde J, H, override ve human_escalation kuralları bozulmuyor. scenario_test bu chaos testine dahil değildir (docs/20).

---

## 4. Özet Tablo

| Hedef | Seç | Beklenen sonuç |
|-------|-----|-----------------|
| Dashboard’ta L0/L1/L2 görmek | Config = scenario_test veya clamp_test | Escalation sayılarında L0, L1 > 0 |
| Anlamlı optimizasyon metrikleri | Config tabanı = scenario_test | fail_safe_rate < 1, L düşebilir |
| Soft clamp davranışını görmek | Config = clamp_test | Soft clamp oranı > 0, action drift/clamp haritaları anlamlı |
| “Sistem sağlam mı?” demek | run_all_tests.py | 16/16 geçti |
| CLI’den anlamlı L | optimize --config-base scenario_test | L ve fail_safe_rate değişimi görünür |

Bu rehber, seçimlerini yapman, alman gereken sonuçları bilmen ve test çıktılarının ne anlama geldiğini anlaman için yeterli olmalı.
