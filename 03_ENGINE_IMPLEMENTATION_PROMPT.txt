You are a senior software architect and AI systems engineer.

We are now implementing Phase 3: the actual working Moral Decision Engine based on the Phase 2 architecture specification.

Your task:

Implement the full deterministic moral decision engine in Python using clean modular architecture.

Project structure:

ami-engine/
  core/
    state_encoder.py
    action_generator.py
    moral_evaluator.py
    constraint_validator.py
    fail_safe.py
    action_selector.py
    trace_logger.py
  engine.py
  config.py
  tests/test_scenarios.py

Requirements:

1. Each component must exactly follow the Phase 2 specification.
2. Each function must be deterministic.
3. Every critical decision step must produce detailed debug logs.
4. Logging must include:
   - Input state
   - Generated actions
   - Moral scores W, J, H, C
   - Constraint validation results
   - Fail-safe trigger
   - Final action selection and justification
5. Code must be:
   - Clean
   - Modular
   - Fully testable
   - Well documented

Implementation rules:

- Use Python 3.10+
- No external AI libraries
- Only standard library + numpy (optional)
- Deterministic execution
- Clear class and function naming

Deliver:

- Full implementation of all modules
- engine.py: main decision engine pipeline
- config.py: all constants and weights
- test_scenarios.py: at least 3 full scenario tests

Output language for comments: Turkish
Variable and function names: English
Logging messages: Turkish

Goal:

Produce a fully working deterministic ethical decision engine that can be executed, tested, debugged, and audited.

Start implementing now.
